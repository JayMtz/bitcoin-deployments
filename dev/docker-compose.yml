services:
  bitcoin-core-regtest:
    image: ruimarinho/bitcoin-core:23.0
    ports:
      - "18443:18443"
      - "18444:18444"
    volumes:
      - ${HOME}/.bitcoin:/home/bitcoin/.bitcoin
    command: [
      -addresstype=legacy,
      -txindex,
      -printtoconsole,
      # Regression test creates an empty private blockchain to test with.
      -regtest=1,
      -rpcallowip=0.0.0.0/0,
      # What IP addresses this node will listen for requests at. 0.0.0.0 -> any address in the docker container.
      # An example of an IP address of the docker container is 172.18.0.2
      -rpcbind=0.0.0.0,
      # {user}:{salt}${hash}
      rpcauth=jayerds:3134d44673a112f04d13233176ebb284$9a14cdacc9017f6ebae0a413d94ea85f090549d2328b19457df3d82525c2b3b8    
      ]